(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2774:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return s(3467)}])},3467:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return S}});var n=s(603),a=s(5893),t=s(7294),c=s(9008),l=s.n(c),i=s(1163),o=s(3299),u=s(7539),f=s.n(u),d=s(4480),x=s(8193),h=s(5675),m=s.n(h),j=s(1664),v=s.n(j);var p=function(){return(0,a.jsxs)("section",{className:"bg-cyan-900 h-full w-[90px] fixed right-0 flex flex-col items-center justify-center space-y-8 z-40",children:[(0,a.jsx)(m(),{src:"/logo.jpeg",width:48,height:48,objectFit:"contain"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,a.jsx)(v(),{href:"/search",children:(0,a.jsx)(x.RB5,{className:"sidebarIcon"})}),(0,a.jsx)(v(),{href:"/song",children:(0,a.jsx)(x.Wxs,{className:"sidebarIcon"})}),(0,a.jsx)(v(),{href:"/queue",children:(0,a.jsx)(x.n5H,{className:"sidebarIcon"})})]})]})};var b=function(e){var r=e.search,s=e.setSearch;return(0,a.jsxs)("div",{className:"w-6/12 max-w-[1150px] flex flex-row rounded-full overflow-hidden border-2 border-[#999999] p-1.5 px-5 pr-8 items-center",children:[(0,a.jsx)("div",{className:"h-4 w-4 border-2 flex-shrink-0 rounded-full border-[#999999]"}),(0,a.jsx)("input",{type:"text",value:r,placeholder:"Find some tunes...",onChange:function(e){return s(e.target.value)},className:"bg-cyan-900 border-none text-neutral-400 lg:w-full focus:ring-0 outline-none placeholder:text-neutral-400 ml-4"})]})},k=(0,d.cn)({key:"playbackState",default:!1}),g=(0,d.cn)({key:"currentTrackState",default:""});var N=function(e){var r=e.track,s=function(){l(r),console.log(r),r.uri==c.uri&&u(!o)},t=(0,n.Z)((0,d.FV)(g),2),c=t[0],l=t[1],i=(0,n.Z)((0,d.FV)(k),2),o=i[0],u=i[1];return(0,a.jsxs)("div",{className:"flex items-center justify-between space-x-20 cursor-pointer hover:bg-white/10 py-2 group transition ease-out",children:[(0,a.jsx)("img",{src:r.albumArt,className:"rounded-xl h-16 w-16 object-cover mr-3"}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("div",{className:"text-neutral-200 truncate w-[550px]",children:r.title}),(0,a.jsx)("div",{className:"text-neutral-400",children:r.artist})]}),(0,a.jsxs)("div",{className:"md:ml-auto flex items-center space-x-2.5",children:[r.uri==c.uri&&o?(0,a.jsx)(x._H$,{className:"sidebarIcon",onClick:s}):(0,a.jsx)(x.Wxs,{className:"sidebarIcon",onClick:s}),(0,a.jsx)(x.Lfi,{className:"sidebarIcon"})]})]})};var w=function(e){var r=e.searchResults;return(0,a.jsx)("div",{className:"flex flex-col flex-grow-1 w-6/12 max-w-[1150px] h-4/6 my-2 border-2 border-neutral-400 rounded-lg overflow-y-scroll p-2",children:r.map((function(e){return(0,a.jsx)(N,{track:e},e.uri)}))})},y=s(3362);var C=function(e){var r=e.accessToken,s=e.trackUri,c=(0,n.Z)((0,d.FV)(k),2),l=c[0],i=c[1],o=(0,n.Z)((0,d.FV)(g),2);return o[0],o[1],(0,t.useEffect)((function(){s&&i(!0)}),[s]),r?(0,a.jsx)(y.ZP,{styles:{activeColor:"#fff",bgColor:"#155e75",color:"#fff",loaderColor:"#fff",sliderColor:"#fff",trackArtistColor:"#a3a3a3",trackNameColor:"#fff",height:"70px",sliderTrackColor:"#a3a3a3",sliderTrackBorderRadius:"4px",sliderHandleColor:"#fff",errorColor:"#fff"},token:r,callback:function(e){i(e.isPlaying)},play:l,uris:s?[s]:[],magnifySliderOnHover:!0,autoPlay:!0}):null},_=s(3454),T=new(f())({clientId:_.env.SPOTIFY_CLIENT_ID});var S=function(){var e=(0,i.useRouter)(),r=(0,o.useSession)().data,s=(0,n.Z)((0,d.FV)(g),2),c=s[0],u=(s[1],(0,t.useState)("")),f=u[0],x=u[1],h=(0,t.useState)([]),m=h[0],j=h[1],v=(0,t.useState)(!1),k=(v[0],v[1]);return(0,t.useEffect)((function(){if(r||e.push("/auth/login"),!f)return j([]);T.setAccessToken(r.accessToken),T.searchTracks(f).then((function(e){j(e.body.tracks.items.map((function(e){var r=e.album.images.reduce((function(e,r){return r.height<e.height?r:e}),e.album.images[0]);return{id:e.id,artist:e.artists[0].name,title:e.name,uri:e.uri,albumArt:r.url}})))}))}),[f,r]),(0,t.useEffect)((function(){k(!0)}),[]),(0,a.jsxs)("div",{className:"bg-cyan-900 h-screen w-screen flex flex-row pt-6",children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"Search - Blast"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("main",{className:"h-11/12 w-11/12 flex flex-col items-center space-y-12",children:[(0,a.jsx)(b,{search:f,setSearch:x}),(0,a.jsx)(w,{searchResults:m})]}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:r?(0,a.jsx)(C,{accessToken:r.accessToken,trackUri:c.uri}):null}),(0,a.jsx)(p,{})]})}},4654:function(){}},function(e){e.O(0,[617,345,924,774,888,179],(function(){return r=2774,e(e.s=r);var r}));var r=e.O();_N_E=r}]);