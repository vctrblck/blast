"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/spotify":
/*!**********************************************!*\
  !*** external "next-auth/providers/spotify" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/spotify");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_spotify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/spotify */ \"next-auth/providers/spotify\");\n/* harmony import */ var next_auth_providers_spotify__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_spotify__WEBPACK_IMPORTED_MODULE_1__);\n// [...nextauth].js\n// Modules:\n\n\n/*\r\nconst express = require('express');\r\n//const cors = require(\"cors\")\r\n\r\nconst lyricsFinder = require(\"lyrics-finder\")\r\nconst bodyParser = require(\"body-parser\")\r\n\r\nconst app = express();\r\n//app.use(cors());\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: true }))\r\n\r\napp.get('/lyrics',async(req,res) => {\r\n  const lyrics = \r\n   (await lyricsFinder(req.query.artist, req.query.track)) || \"No lyrics where found\"\r\n  res.json({lyrics})\r\n})*/ // Code:\n// Takes a token, and returns a new token with updated\n// `accessToken` and `accessTokenExpires`. If an error occurs,\n// returns the old token and an error property\nasync function refreshAccessToken(token) {\n    try {\n        const url = \"https://accounts.spotify.com/api/token?\" + new URLSearchParams({\n            client_id: process.env.SPOTIFY_CLIENT_ID,\n            client_secret: process.env.SPOTIFY_CLIENT_SECRET,\n            grant_type: \"refresh_token\",\n            refresh_token: token.refreshToken\n        });\n        const response = await fetch(url, {\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            method: \"POST\"\n        });\n        const refreshedTokens = await response.json();\n        if (!response.ok) {\n            throw refreshedTokens;\n        }\n        return {\n            ...token,\n            accessToken: refreshedTokens.access_token,\n            accessTokenExpires: Date.now() + refreshedTokens.expires_in * 1000,\n            refreshToken: refreshedTokens.refresh_token ?? token.refreshToken\n        };\n    } catch (error) {\n        console.log(error);\n        return {\n            ...token,\n            error: \"RefreshAccessTokenError\"\n        };\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth_next__WEBPACK_IMPORTED_MODULE_0___default()({\n    providers: [\n        next_auth_providers_spotify__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.SPOTIFY_CLIENT_ID,\n            clientSecret: process.env.SPOTIFY_CLIENT_SECRET,\n            authorization: \"https://accounts.spotify.com/authorize?scope=user-read-email,playlist-read-private,user-read-email,streaming,user-read-private,user-library-read,user-library-modify,user-read-playback-state,user-modify-playback-state,user-read-recently-played,user-follow-read\"\n        })\n    ],\n    pages: {\n        signIn: \"/auth/login\"\n    },\n    callbacks: {\n        async jwt ({ token , user , account  }) {\n            // Initial sign in\n            if (account && user) {\n                return {\n                    accessToken: account.access_token,\n                    accessTokenExpires: Date.now() + account.expires_in * 1000,\n                    refreshToken: account.refresh_token,\n                    user\n                };\n            }\n            // Return previous token if the access token has not expired yet\n            if (Date.now() < token.accessTokenExpires) {\n                return token;\n            }\n            // Access token has expired, try to update it\n            return refreshAccessToken(token);\n        },\n        async session ({ session , token  }) {\n            session.user = token.user;\n            session.accessToken = token.accessToken;\n            session.error = token.error;\n            return session;\n        }\n    }\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsbUJBQW1CO0FBRW5CLFdBQVc7QUFFMkI7QUFDb0I7QUFDMUQ7QUFxQkE7QUFDQTtBQUNBO0FBRUMsZUFBZUUsa0JBQWtCLENBQUNDLEtBQUssRUFBRTtJQUN4QyxJQUFJOztZQUdFRyxTQUFTLEVBQUVDO1lBQ1hHO1lBQ0FFLFVBQVUsRUFBRTtZQUNaQyxhQUFhLEVBQUVWLEtBQUssQ0FBQ1csWUFBWTs7UUFHckMsTUFBTUMsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQ1o7WUFDM0JhO2dCQUNFLGNBQWMsRUFBRSxtQ0FBbUM7YUFDcEQ7WUFDREM7U0FDRCxDQUFDO1FBRUYsTUFBTUMsZUFBZSxHQUFHLE1BQU1KLFFBQVEsQ0FBQ0ssSUFBSSxFQUFFO1FBRTdDLElBQUksQ0FBQ0wsUUFBUSxDQUFDTSxFQUFFLEVBQUU7WUFDaEIsTUFBTUYsZUFBZSxDQUFDO1NBQ3ZCO1FBRUQsT0FBTztZQUNMLEdBQUdoQixLQUFLO1lBQ1JtQixXQUFXLEVBQUVILGVBQWUsQ0FBQ0ksWUFBWTtZQUN6Q0Msa0JBQWtCLEVBQUVDLElBQUksQ0FBQ0MsR0FBRztZQUM1QlosWUFBWSxFQUFFSyxlQUFlLENBQUNOO1NBQy9CLENBQUM7S0FDSCxDQUFDLE9BQU9lLEtBQUssRUFBRTtRQUNkQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0Y7UUFFWixPQUFPO1lBQ0w7WUFDQUEsS0FBSyxFQUFFO1NBQ1IsQ0FBQztLQUNIO0NBQ0Y7QUFFRCxlQUFlNUIsUUFBUSxDQUFDO0lBQ3RCK0I7UUFDRTlCO1lBQ0UrQixRQUFRO1lBQ1JDLFlBQVksRUFBRTFCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRztZQUMxQnVCLGFBQWEsRUFDWDtTQUNILENBQUM7S0FDSDtJQUVEQyxLQUFLLEVBQUU7UUFDTEMsTUFBTSxFQUFFO0tBQ1Q7SUFFREMsU0FBUyxFQUFFO1FBQ1QsTUFBTUMsR0FBRyxFQUFDLEVBQUVuQyxLQUFLLEdBQUVvQyxJQUFJLEdBQUVDLE9BQU87Ozs7c0hBSTFCbEI7OzBFQUVBUjtvQkFDQXlCLElBQUk7aUJBQ0wsQ0FBQzthQUNIOzs7O2FBS0E7O1lBR0Q7U0FDRDtRQUVELE1BQU1FLE9BQU8sRUFBQyxFQUFFQTtZQUNkQSxPQUFPLENBQUNGLElBQUksR0FBR3BDLEtBQUssQ0FBQ29DO1lBQ3JCRSxPQUFPLENBQUNuQjtZQUNSbUIsT0FBTyxDQUFDYixLQUFLLEdBQUd6QixLQUFLLENBQUN5QixLQUFLLENBQUM7WUFFNUIsT0FBT2EsT0FBTyxDQUFDO1NBQ2hCO0tBQ0Y7Q0FDRixDQUFDLENBRUY7Q0FFQTtDQUpFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS5qcz81MjdmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFsuLi5uZXh0YXV0aF0uanNcclxuXHJcbi8vIE1vZHVsZXM6XHJcblxyXG5pbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aC9uZXh0XCI7XHJcbmltcG9ydCBTcG90aWZ5UHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvc3BvdGlmeVwiO1xyXG4vKlxyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG4vL2NvbnN0IGNvcnMgPSByZXF1aXJlKFwiY29yc1wiKVxyXG5cclxuY29uc3QgbHlyaWNzRmluZGVyID0gcmVxdWlyZShcImx5cmljcy1maW5kZXJcIilcclxuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoXCJib2R5LXBhcnNlclwiKVxyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG4vL2FwcC51c2UoY29ycygpKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XHJcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpXHJcblxyXG5hcHAuZ2V0KCcvbHlyaWNzJyxhc3luYyhyZXEscmVzKSA9PiB7XHJcbiAgY29uc3QgbHlyaWNzID0gXHJcbiAgIChhd2FpdCBseXJpY3NGaW5kZXIocmVxLnF1ZXJ5LmFydGlzdCwgcmVxLnF1ZXJ5LnRyYWNrKSkgfHwgXCJObyBseXJpY3Mgd2hlcmUgZm91bmRcIlxyXG4gIHJlcy5qc29uKHtseXJpY3N9KVxyXG59KSovXHJcblxyXG5cclxuLy8gQ29kZTpcclxuXHJcbi8vIFRha2VzIGEgdG9rZW4sIGFuZCByZXR1cm5zIGEgbmV3IHRva2VuIHdpdGggdXBkYXRlZFxyXG4vLyBgYWNjZXNzVG9rZW5gIGFuZCBgYWNjZXNzVG9rZW5FeHBpcmVzYC4gSWYgYW4gZXJyb3Igb2NjdXJzLFxyXG4vLyByZXR1cm5zIHRoZSBvbGQgdG9rZW4gYW5kIGFuIGVycm9yIHByb3BlcnR5XHJcblxyXG4gYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEFjY2Vzc1Rva2VuKHRva2VuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVybCA9IFwiaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW4/XCJcclxuICAgICsgbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcbiAgICAgICAgY2xpZW50X2lkOiBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9JRCxcclxuICAgICAgICBjbGllbnRfc2VjcmV0OiBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9TRUNSRVQsXHJcbiAgICAgICAgZ3JhbnRfdHlwZTogXCJyZWZyZXNoX3Rva2VuXCIsXHJcbiAgICAgICAgcmVmcmVzaF90b2tlbjogdG9rZW4ucmVmcmVzaFRva2VuLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcclxuICAgICAgfSxcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHJlZnJlc2hlZFRva2VucyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IHJlZnJlc2hlZFRva2VucztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi50b2tlbixcclxuICAgICAgYWNjZXNzVG9rZW46IHJlZnJlc2hlZFRva2Vucy5hY2Nlc3NfdG9rZW4sXHJcbiAgICAgIGFjY2Vzc1Rva2VuRXhwaXJlczogRGF0ZS5ub3coKSArIHJlZnJlc2hlZFRva2Vucy5leHBpcmVzX2luICogMTAwMCxcclxuICAgICAgcmVmcmVzaFRva2VuOiByZWZyZXNoZWRUb2tlbnMucmVmcmVzaF90b2tlbiA/PyB0b2tlbi5yZWZyZXNoVG9rZW4sIC8vIEZhbGwgYmFjayB0byBvbGQgcmVmcmVzaCB0b2tlblxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLnRva2VuLFxyXG4gICAgICBlcnJvcjogXCJSZWZyZXNoQWNjZXNzVG9rZW5FcnJvclwiLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKHtcclxuICBwcm92aWRlcnM6IFtcclxuICAgIFNwb3RpZnlQcm92aWRlcih7XHJcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9JRCxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9TRUNSRVQsXHJcbiAgICAgIGF1dGhvcml6YXRpb246XHJcbiAgICAgICAgXCJodHRwczovL2FjY291bnRzLnNwb3RpZnkuY29tL2F1dGhvcml6ZT9zY29wZT11c2VyLXJlYWQtZW1haWwscGxheWxpc3QtcmVhZC1wcml2YXRlLHVzZXItcmVhZC1lbWFpbCxzdHJlYW1pbmcsdXNlci1yZWFkLXByaXZhdGUsdXNlci1saWJyYXJ5LXJlYWQsdXNlci1saWJyYXJ5LW1vZGlmeSx1c2VyLXJlYWQtcGxheWJhY2stc3RhdGUsdXNlci1tb2RpZnktcGxheWJhY2stc3RhdGUsdXNlci1yZWFkLXJlY2VudGx5LXBsYXllZCx1c2VyLWZvbGxvdy1yZWFkXCIsXHJcbiAgICB9KVxyXG4gIF0sXHJcblxyXG4gIHBhZ2VzOiB7XHJcbiAgICBzaWduSW46IFwiL2F1dGgvbG9naW5cIlxyXG4gIH0sXHJcblxyXG4gIGNhbGxiYWNrczoge1xyXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQgfSkge1xyXG4gICAgICAvLyBJbml0aWFsIHNpZ24gaW5cclxuICAgICAgaWYgKGFjY291bnQgJiYgdXNlcikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBhY2Nlc3NUb2tlbjogYWNjb3VudC5hY2Nlc3NfdG9rZW4sXHJcbiAgICAgICAgICBhY2Nlc3NUb2tlbkV4cGlyZXM6IERhdGUubm93KCkgKyBhY2NvdW50LmV4cGlyZXNfaW4gKiAxMDAwLFxyXG4gICAgICAgICAgcmVmcmVzaFRva2VuOiBhY2NvdW50LnJlZnJlc2hfdG9rZW4sXHJcbiAgICAgICAgICB1c2VyLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJldHVybiBwcmV2aW91cyB0b2tlbiBpZiB0aGUgYWNjZXNzIHRva2VuIGhhcyBub3QgZXhwaXJlZCB5ZXRcclxuICAgICAgaWYgKERhdGUubm93KCkgPCB0b2tlbi5hY2Nlc3NUb2tlbkV4cGlyZXMpIHtcclxuICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZCwgdHJ5IHRvIHVwZGF0ZSBpdFxyXG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHRva2VuKTtcclxuICAgIH0sXHJcblxyXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcclxuICAgICAgc2Vzc2lvbi51c2VyID0gdG9rZW4udXNlcjtcclxuICAgICAgc2Vzc2lvbi5hY2Nlc3NUb2tlbiA9IHRva2VuLmFjY2Vzc1Rva2VuO1xyXG4gICAgICBzZXNzaW9uLmVycm9yID0gdG9rZW4uZXJyb3I7XHJcblxyXG4gICAgICByZXR1cm4gc2Vzc2lvbjtcclxuICAgIH0sXHJcbiAgfVxyXG59KVxyXG5cclxuLy9hcHAubGlzdGVuKDMwMDEpO1xyXG5cclxuLy8gWy4uLm5leHRhdXRoXS5qcyBlbmRzIGhlcmUiXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJTcG90aWZ5UHJvdmlkZXIiLCJyZWZyZXNoQWNjZXNzVG9rZW4iLCJ0b2tlbiIsInVybCIsIlVSTFNlYXJjaFBhcmFtcyIsImNsaWVudF9pZCIsInByb2Nlc3MiLCJlbnYiLCJTUE9USUZZX0NMSUVOVF9JRCIsImNsaWVudF9zZWNyZXQiLCJTUE9USUZZX0NMSUVOVF9TRUNSRVQiLCJncmFudF90eXBlIiwicmVmcmVzaF90b2tlbiIsInJlZnJlc2hUb2tlbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwibWV0aG9kIiwicmVmcmVzaGVkVG9rZW5zIiwianNvbiIsIm9rIiwiYWNjZXNzVG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJhY2Nlc3NUb2tlbkV4cGlyZXMiLCJEYXRlIiwibm93IiwiZXhwaXJlc19pbiIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInByb3ZpZGVycyIsImNsaWVudElkIiwiY2xpZW50U2VjcmV0IiwiYXV0aG9yaXphdGlvbiIsInBhZ2VzIiwic2lnbkluIiwiY2FsbGJhY2tzIiwiand0IiwidXNlciIsImFjY291bnQiLCJzZXNzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/auth/[...nextauth].js"));
module.exports = __webpack_exports__;

})();